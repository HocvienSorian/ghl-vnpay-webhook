<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>K·∫øt qu·∫£ thanh to√°n</title>
  </head>
  <body>
    <h2>üîÑ ƒêang x·ª≠ l√Ω k·∫øt qu·∫£ thanh to√°n...</h2>
    <script>
      const params = new URLSearchParams(window.location.search);
      const vnp_SecureHash = params.get('vnp_SecureHash');
      if (!vnp_SecureHash) {
        document.body.innerHTML = "<h3>‚ùå Thi·∫øu th√¥ng tin k·∫øt qu·∫£ thanh to√°n</h3>";
      } else {
        fetch('/api/vnpay_return', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(Object.fromEntries(params.entries()))
        })
          .then(res => res.json())
          .then(result => {
            document.body.innerHTML = `<h3>${result.message}</h3>`;
          })
          .catch(err => {
            console.error(err);
            document.body.innerHTML = "<h3>‚ùå L·ªói x·ª≠ l√Ω k·∫øt qu·∫£ thanh to√°n</h3>";
          });
      }
    </script>
  </body>
</html>
